# 14. Explain aggregate & groupby functions of Pandas.

The `groupby` and `aggregate` (or `agg`) functions in Pandas are powerful tools that allow you to perform the **Split-Apply-Combine** strategy on your data. This is a common pattern in data analysis:
1.  **Split:** Break the data into groups based on some criteria.
2.  **Apply:** Apply a function to each group independently.
3.  **Combine:** Combine the results into a new data structure.

## `groupby()`

The `groupby()` function is used for the **"Split"** part of the process. You provide one or more column names, and Pandas groups the rows of the DataFrame based on the unique values in those columns.

The result of a `groupby()` operation is a `DataFrameGroupBy` object. This object holds the information about the groups, but no actual computation is performed until you **"Apply"** a function to it.

### Example of `groupby()`:
```python
import pandas as pd

df = pd.DataFrame({
    'Store': ['A', 'B', 'A', 'B', 'A', 'C'],
    'Product': ['Apple', 'Apple', 'Orange', 'Orange', 'Apple', 'Apple'],
    'Sales': [100, 150, 80, 200, 120, 50]
})

# Group the DataFrame by the 'Store' column
grouped_by_store = df.groupby('Store')

# At this point, 'grouped_by_store' is a DataFrameGroupBy object.
# We can inspect the groups:
for name, group in grouped_by_store:
    print(f"--- Group: {name} ---")
    print(group)
    print()
```

## `aggregate()` (or `.agg()`)

The `aggregate()` function (often used via its alias `.agg()`) is one of the most flexible ways to perform the **"Apply"** and **"Combine"** steps. It allows you to apply one or more functions to the grouped data.

You can apply:
- A single function to all columns.
- Multiple functions to all columns.
- Different functions to different columns.

### Examples of `aggregate()`:

#### 1. Single Aggregation
Apply a single function (e.g., `sum()`) to the grouped object.

```python
# Calculate the total sales for each store
total_sales = grouped_by_store['Sales'].sum()
print(total_sales)
```
*Output:*
```
Store
A    300
B    350
C     50
Name: Sales, dtype: int64
```

#### 2. Multiple Aggregations with `.agg()`
Use `.agg()` to apply multiple functions at once.

```python
# Calculate the sum, mean, and count of sales for each store
sales_stats = grouped_by_store['Sales'].agg(['sum', 'mean', 'count'])
print(sales_stats)
```
*Output:*
```
       sum        mean  count
Store                        
A      300  100.000000      3
B      350  175.000000      2
C       50   50.000000      1
```

#### 3. Different Aggregations for Different Columns
You can group by multiple columns and apply different aggregations to different columns using a dictionary.

```python
# Group by both Store and Product
grouped_by_store_product = df.groupby(['Store', 'Product'])

# Calculate the total sales and get the number of entries
agg_results = grouped_by_store_product.agg(
    TotalSales=('Sales', 'sum'),
    TransactionCount=('Sales', 'count')
)
print(agg_results)
```
*Output:*
```
               TotalSales  TransactionCount
Store Product                              
A     Apple           220                 2
      Orange           80                 1
B     Apple           150                 1
      Orange          200                 1
C     Apple            50                 1
```
In summary, `groupby()` splits the data, and `agg()` provides a highly flexible way to apply functions and combine the results, making it a cornerstone of data analysis in Pandas.
